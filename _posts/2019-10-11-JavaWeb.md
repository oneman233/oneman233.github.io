---
layout: post
title: "JavaWeb"
date: 2019-10-11
tags: ["学习笔记"]
comments: true
author: oneman233
excerpt: "前端"
---

* 什么是Java Server Pages?
  * JSP可以动态地修改页面，可以在HTML中插入JAVA代码。
* JSP的action必须使用类似./servlet的方式调用servlet，并且servlet的url必须设置为/servlet
  * servlet必须继承自httpservlet
* 获取系统时间的写法：
  
    ```java
    SimpleDateFormat df=new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    Date d=new Date();
    String date=df.format(d);
    ```

* 转发时在request当中新建键值对的写法：

    ```java
    //转发到results页面
    req.setAttribute("deng","转发成功");
    //在request里面加入一个键值对，便于在转发后的servlet中进行测试
    req.getRequestDispatcher("/results").forward(req,resp);
    ```

* [application的一些用法](https://blog.csdn.net/CCCrunner/article/details/81052373)

* 用于中文转码的函数：

    ```java
    private String change(String s) throws UnsupportedEncodingException {
        return new String(s.getBytes("ISO8859-1"),"UTF-8");
    }
    ```

* [textarea标签相关](https://www.runoob.com/tags/tag-textarea.html)

* application是一种“全局变量”，可以从request中获取session之后获得，并且可以用set方便地改变键值对。
  * 如果没有request，那么在JSP文件中的application将为null

* session会话机制是一种服务器端机制，它使用类似于哈希表的结构来保存信息。

* jsp可以在java代码中穿插HTML：
  
    ```js
    <%ArrayList list=(ArrayList) application.getAttribute("list");
        if(list==null||list.size()==0) {
        out.print("暂无留言");
        } else {
            for(int i=0;i<list.size();++i){
                out.print("标题："+m.getTitle()+"\n");
                out.print("内容："+m.getContent()+"\n");
                out.print("时间："+m.getTime()+"\n");
    %>
        <%--在java代码中间穿插的html语言--%>
        留言者：<%=m.getName()%>
        留言标题：<%=m.getTitle()%>
        留言时间：<%=m.getTime()%>
        留言内容：<%=m.getContent()%>
    <%       
            }     
        } 
    %>
    ```

* 注意新建了Tomcat还要新建Artificial，否则会报找不到路径：
  * [新建Tomcat](https://blog.csdn.net/wsjzzcbq/article/details/89463304)
  * [新建Artificial](https://bbs.csdn.net/topics/392299968)

* [关于找不到servlet包](https://blog.csdn.net/q343509740/article/details/79515911)
  * 使用第一个解决方案的project structure即可

* [关于HTML标签](https://www.runoob.com/html/html-forms.html)

* [报Cannot forward after response has been committed错误](https://www.cnblogs.com/WyaJx/p/7823723.html)
  * 去除super，并且写上return。

* [servlet转发](https://www.cnblogs.com/flypig666/p/11480537.html)
  * 通过request对象获取请求转发器对象：`RequestDispatcher getRequestDispatcher(String path)`
  * 使用RequestDispatcher对象来进行转发：`forward(ServletRequest request, ServletResponse response)`

* 记得转发一个Arraylist给JSP，因为在JSP中调用Message类不能实现，会涉及到很多包的问题。
  * 记得放到同一个package下

* [基本教程](https://blog.csdn.net/csp_6666/article/details/78509088)

* [sevlet基本使用](https://www.runoob.com/servlet/servlet-form-data.html)

* [关于double转string](https://blog.csdn.net/wishchin/article/details/78399552)
  * 似乎使用parsedouble更合适

* java string判断相等用equal方法

* 如何在显示结果页面返回主页面？
  * 放置一个超链接即可。

* [不要乱去调用super函数，会导致很多憨批错误](https://blog.csdn.net/sinat_33537942/article/details/80625572)

* [Java如何处理带双引号的字符串](https://blog.csdn.net/weixin_39128119/article/details/82762348)

* [调IDEA背景颜色](https://jingyan.baidu.com/article/63acb44a1da58761fcc17e86.html)

* 解决乱码（如果表单提交的数据中有中文数据则需要转码）：

    ```java
    String name =new String(request.getParameter("name").getBytes("ISO8859-1"),"UTF-8");
    ```

* 单选框设置默认选项用selected，radio则使用checked。

* [Java的Map用法](https://blog.csdn.net/qq_29373285/article/details/81487594)

* **value属性最好不用中文**，远离乱码困扰。

* 设置背景图片：

    ```css
    body
    {
        background-image: url('image/back.png');
        /此处的根目录是web根目录，别加反斜杠/
    }
    ```

* 为了把超链接居中，可以直接更改段落格式，然后把href设为段落。
  * 直接更改似乎不可行。

* 更改字体和字符大小：

    ```css
    p
    {
        font-weight: bold;
        font-family: 'Times New Roman', Times, Serif;
        font-size: 20px;
        color: red;
        text-align: center;
    }
    textarea
    {
        font-size: 10px;
        font-family: 'Times New Roman', Times, Serif;
        text-align: center;
    }
    ```

* 加粗字体：`font-weight: bold;`

* 如何修改链接属性（甚至可以设置为鼠标移动上去时才显示下划线）：

    ```css
    a:link{
        color: blueviolet;
        text-decoration: none;
    }/未访问链接/
    a:visited{
        color: darkgreen;
        text-decoration: none;
    }/已访问链接/
    a:hover{
        color: darkgoldenrod;
        text-decoration: underline;
    }/鼠标移动到链接上/
    ```

* 对textarea的调整：

    ```css
    width: 200px;
    height: 100px;
    border: solid 1px;
    border-radius: 20px;
    resize: none;
    background-color: darkslategrey;
    /*设置了长宽，圆角有边框，不可调整大小，设置了背景颜色*/
    ```

* 对input的字体和被选中效果的调整：

    ```css
    input
    {
        color: crimson;
    }
    input:hover
    {
        background-color: lawngreen;
    }
    ```

* **小心绝对路径和相对路径的区别**。

* [JSTL](https://www.runoob.com/jsp/jsp-jstl.html)

    [EL](https://www.runoob.com/jsp/jsp-expression-language.html)

* **F12调试工具application可以删除cookie**。

* 判断是否存在cookie（所有EL必须写在大括号里！）：

    ```js
    <c:if test="${cookie['username'].value eq null}">
        <c:redirect url="loginJSP.jsp"></c:redirect>
    </c:if>
    ```

* 更改cookie：

    ```java
    Cookie cookie=new Cookie("username",name);
        //新建cookie
        resp.addCookie(cookie);
        //添加cookie
        req.getRequestDispatcher("index.jsp").forward(req, resp);
        resp.sendRedirect("index.jsp");
        //存在cookie之后就不需要req了
    ```

* IDEA可以使用alt+insert快速创建构造函数以及geter，seter。

* 删除cookie：

    ```java
    Cookie cookie = new Cookie("username",null);
        cookie.setMaxAge(0);
        //最大生存时间0
        resp.addCookie(cookie);
        resp.sendRedirect("index.jsp");
    ```